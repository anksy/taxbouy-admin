{"ast":null,"code":"var _jsxFileName = \"/Users/Shruti_Bhateja/Documents/taxbouy-admin/taxbouy-admin/src/containers/Ecommerce/Category/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport Table from \"../../../components/table\";\nimport { AppWrapper, ActionTray } from \"../../../components/global/styles\";\nimport { useGetCategoriesQuery, useUpsertCategoryMutation, useDeleteCategoryMutation } from \"../../../services/query/category\";\nimport { displayModal, displayToastMessage, toggleLoader } from \"../../../store/common/application.slice\";\nimport { httpVerbs, promiseStatus } from \"../../../constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst columns = [{\n  field: \"id\",\n  header: \"ID\",\n  width: \"5%\"\n}, {\n  field: \"title\",\n  header: \"Title\",\n  width: \"15%\"\n}, {\n  field: \"description\",\n  header: \"Description\",\n  width: \"25%\"\n}, {\n  field: \"createdAt\",\n  header: \"Created At\",\n  width: \"20%\",\n  type: \"date\"\n}, {\n  field: \"is_active\",\n  header: \"Is Active\",\n  values: [\"Yes\", \"No\"],\n  width: \"15%\"\n}];\n\nconst CategoryContainer = _ref => {\n  _s();\n\n  var _metaAttrs$error, _metaAttrs$error$data, _deleteMetaAttrs$data, _deleteMetaAttrs$erro, _deleteMetaAttrs$erro2;\n\n  let {\n    history,\n    dispatch\n  } = _ref;\n  const {\n    data: categories,\n    isLoading\n  } = useGetCategoriesQuery();\n  const [upsertCategory, metaAttrs] = useUpsertCategoryMutation();\n  const [deleteCategory, deleteMetaAttrs] = useDeleteCategoryMutation();\n  useEffect(() => {\n    if (!metaAttrs.isLoading) {\n      if (metaAttrs.status === promiseStatus.REJECTED) {\n        dispatch(displayToastMessage({\n          open: true,\n          type: \"error\",\n          message: metaAttrs.error.data.message\n        }));\n      }\n    }\n  }, [metaAttrs.status, metaAttrs.isLoading, (_metaAttrs$error = metaAttrs.error) === null || _metaAttrs$error === void 0 ? void 0 : (_metaAttrs$error$data = _metaAttrs$error.data) === null || _metaAttrs$error$data === void 0 ? void 0 : _metaAttrs$error$data.message, dispatch]);\n  useEffect(() => {\n    if (!deleteMetaAttrs.isLoading) {\n      if (deleteMetaAttrs.status === promiseStatus.REJECTED) {\n        dispatch(toggleLoader(false));\n        dispatch(displayToastMessage({\n          open: true,\n          type: \"error\",\n          message: deleteMetaAttrs.error.data.message\n        }));\n      }\n\n      if (deleteMetaAttrs.status === promiseStatus.FULFILLED) {\n        dispatch(toggleLoader(false));\n        dispatch(displayToastMessage({\n          open: true,\n          type: \"success\",\n          message: deleteMetaAttrs.data.message\n        }));\n        dispatch(displayModal({\n          open: false,\n          modalProps: {}\n        }));\n      }\n    }\n  }, [deleteMetaAttrs.status, deleteMetaAttrs.isLoading, (_deleteMetaAttrs$data = deleteMetaAttrs.data) === null || _deleteMetaAttrs$data === void 0 ? void 0 : _deleteMetaAttrs$data.message, (_deleteMetaAttrs$erro = deleteMetaAttrs.error) === null || _deleteMetaAttrs$erro === void 0 ? void 0 : (_deleteMetaAttrs$erro2 = _deleteMetaAttrs$erro.data) === null || _deleteMetaAttrs$erro2 === void 0 ? void 0 : _deleteMetaAttrs$erro2.message, dispatch]);\n\n  const onDelete = resourceId => {\n    dispatch(displayModal({\n      open: true,\n      modalProps: {\n        title: \"Confirm your action\",\n        component: () => /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Do you really want to delete this category?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 34\n        }, this),\n        okText: \"Delete\",\n        cancelText: \"Cancel\",\n        ok: () => {\n          dispatch(toggleLoader(true));\n          deleteCategory(resourceId);\n        }\n      }\n    }));\n  };\n\n  const onStatusToggle = async data => {\n    await upsertCategory({\n      method: httpVerbs.PATCH,\n      body: {\n        \"id\": data.id,\n        \"key\": \"is_active\",\n        \"value\": !data.is_active\n      }\n    });\n  };\n\n  const onEdit = data => {\n    history.push(`/categories/add/${data.id}`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(AppWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(ActionTray, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"toolbar\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          variant: \"contained\",\n          onClick: () => history.push(`/categories/add/new`),\n          children: \"New Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      columns: columns,\n      rows: categories === null || categories === void 0 ? void 0 : categories.data,\n      editAction: onEdit,\n      deactivateAction: onStatusToggle,\n      deleteAction: onDelete,\n      isFetching: isLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CategoryContainer, \"n1qvT4Z6ljVFh3829PF4CLXR8/A=\", false, function () {\n  return [useGetCategoriesQuery, useUpsertCategoryMutation, useDeleteCategoryMutation];\n});\n\n_c = CategoryContainer;\nexport default CategoryContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"CategoryContainer\");","map":{"version":3,"sources":["/Users/Shruti_Bhateja/Documents/taxbouy-admin/taxbouy-admin/src/containers/Ecommerce/Category/index.jsx"],"names":["React","useEffect","Button","Table","AppWrapper","ActionTray","useGetCategoriesQuery","useUpsertCategoryMutation","useDeleteCategoryMutation","displayModal","displayToastMessage","toggleLoader","httpVerbs","promiseStatus","columns","field","header","width","type","values","CategoryContainer","history","dispatch","data","categories","isLoading","upsertCategory","metaAttrs","deleteCategory","deleteMetaAttrs","status","REJECTED","open","message","error","FULFILLED","modalProps","onDelete","resourceId","title","component","okText","cancelText","ok","onStatusToggle","method","PATCH","body","id","is_active","onEdit","push"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport Table from \"../../../components/table\";\nimport { AppWrapper, ActionTray } from \"../../../components/global/styles\";\nimport { useGetCategoriesQuery, useUpsertCategoryMutation, useDeleteCategoryMutation } from \"../../../services/query/category\";\nimport { displayModal, displayToastMessage, toggleLoader } from \"../../../store/common/application.slice\";\nimport { httpVerbs, promiseStatus } from \"../../../constants\";\n\nconst columns = [\n    { field: \"id\", header: \"ID\", width: \"5%\" },\n    { field: \"title\", header: \"Title\", width: \"15%\" },\n    { field: \"description\", header: \"Description\", width: \"25%\" },\n    { field: \"createdAt\", header: \"Created At\", width: \"20%\", type: \"date\" },\n    { field: \"is_active\", header: \"Is Active\", values: [\"Yes\", \"No\"], width: \"15%\" },\n];\n\nconst CategoryContainer = ({ history, dispatch }) => {\n    const { data: categories, isLoading } = useGetCategoriesQuery();\n    const [upsertCategory, metaAttrs] = useUpsertCategoryMutation();\n    const [deleteCategory, deleteMetaAttrs] = useDeleteCategoryMutation();\n\n    useEffect(() => {\n        if (!metaAttrs.isLoading) {\n            if (metaAttrs.status === promiseStatus.REJECTED) {\n                dispatch(displayToastMessage({\n                    open: true,\n                    type: \"error\",\n                    message: metaAttrs.error.data.message\n                }));\n            }\n        }\n    }, [metaAttrs.status, metaAttrs.isLoading, metaAttrs.error?.data?.message, dispatch])\n\n    useEffect(() => {\n        if (!deleteMetaAttrs.isLoading) {\n            if (deleteMetaAttrs.status === promiseStatus.REJECTED) {\n                dispatch(toggleLoader(false));\n                dispatch(displayToastMessage({\n                    open: true,\n                    type: \"error\",\n                    message: deleteMetaAttrs.error.data.message\n                }));\n            }\n\n            if (deleteMetaAttrs.status === promiseStatus.FULFILLED) {\n                dispatch(toggleLoader(false));\n                dispatch(displayToastMessage({\n                    open: true,\n                    type: \"success\",\n                    message: deleteMetaAttrs.data.message\n                }));\n                dispatch(displayModal({\n                    open: false,\n                    modalProps: {}\n                }));\n            }\n        }\n    }, [deleteMetaAttrs.status, deleteMetaAttrs.isLoading, deleteMetaAttrs.data?.message, deleteMetaAttrs.error?.data?.message, dispatch])\n\n    const onDelete = (resourceId) => {\n        dispatch(displayModal({\n            open: true,\n            modalProps: {\n                title: \"Confirm your action\",\n                component: () => <h1>Do you really want to delete this category?</h1>,\n                okText: \"Delete\",\n                cancelText: \"Cancel\",\n                ok: () => {\n                    dispatch(toggleLoader(true));\n                    deleteCategory(resourceId);\n                }\n            }\n        }));\n    }\n\n    const onStatusToggle = async (data) => {\n        await upsertCategory({\n            method: httpVerbs.PATCH,\n            body: {\n                \"id\": data.id,\n                \"key\": \"is_active\",\n                \"value\": !data.is_active,\n            }\n        });\n    }\n\n    const onEdit = (data) => {\n        history.push(`/categories/add/${data.id}`);\n    }\n\n    return (\n        <AppWrapper>\n            <ActionTray>\n                {/* <div className=\"breadcrumb\">\n                    <div>Dashboard</div>\n                    <div>Categories</div>\n                    <div>Add new category</div>\n                </div> */}\n                <div className=\"toolbar\">\n                    <Button color=\"primary\" variant=\"contained\" onClick={() => history.push(`/categories/add/new`)}>New Category</Button>\n                </div>\n            </ActionTray>\n            <Table columns={columns} rows={categories?.data} editAction={onEdit} deactivateAction={onStatusToggle} deleteAction={onDelete} isFetching={isLoading} />\n        </AppWrapper>\n    );\n}\n\nexport default CategoryContainer;"]},"metadata":{},"sourceType":"module"}