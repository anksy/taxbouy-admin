{"ast":null,"code":"var _jsxFileName = \"/Users/Shruti_Bhateja/Documents/taxbouy-admin/taxbouy-admin/src/containers/Shop/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Stepper, Step, StepLabel } from \"@material-ui/core\";\nimport { Store } from \"@material-ui/icons\";\nimport Confetti from \"react-confetti\";\nimport ShopSetup from \"./ShopSetup\";\nimport StoreSetup from \"./StoreSetup\";\nimport * as sc from \"./styles\";\nimport { setShopname } from \"./shop.slice\";\nimport { toggleLoader, displayToastMessage } from \"../../store/common/application.slice\";\nimport { openMyShop, openMyStore } from \"../../apis\";\nimport { defaultShopDetails, defaultStoreDetails } from \"../../constants/defaults\";\nimport { OpenShopMessage, OpenStoreMessage, SetupShopMessage } from \"../../constants/messages\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SetupApp = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const shopSelector = useSelector(state => state.shop);\n  const [activeStep, setStep] = useState(0);\n  const [isSetupComplete, setSetupComplete] = useState(false);\n  const shopDetails = shopSelector !== null && shopSelector !== void 0 && shopSelector.shopId ? {\n    shopId: shopSelector.shopId,\n    shopname: shopSelector.shopname\n  } : { ...defaultShopDetails\n  };\n  useEffect(() => {\n    if (shopSelector.stores.length > 0) {\n      localStorage.setItem(\"shopname\", shopSelector.shopname);\n      localStorage.setItem(\"storeadded\", true);\n      window.location.reload();\n    }\n  }, [shopSelector.stores.length, shopSelector.shopname]);\n\n  const stepOneSubmit = _ref => {\n    let {\n      shopname\n    } = _ref;\n\n    /* submit shop details */\n    dispatch(toggleLoader(true));\n    openMyShop({\n      shopname,\n      shopId: shopSelector.shopId || undefined\n    }).then(_ref2 => {\n      let {\n        data,\n        message\n      } = _ref2;\n      dispatch(toggleLoader(false));\n      dispatch(setShopname({\n        shopId: data.id,\n        shopname: data.shopname\n      }));\n      dispatch(displayToastMessage({\n        open: true,\n        type: \"success\",\n        message\n      }));\n      setStep(step => step + 1);\n    }).catch(error => {\n      dispatch(toggleLoader(false));\n      dispatch(displayToastMessage({\n        open: true,\n        type: \"error\",\n        message: error.message\n      }));\n    });\n  };\n\n  const stepTwoSubmit = values => {\n    /* submit store details */\n    dispatch(toggleLoader(true));\n    openMyStore({\n      shopId: shopSelector.shopId,\n      storeLocationName: values.storePrimaryLocation,\n      storeAddress: values.storeAddress,\n      storeContactNumber: values.storeContactNumber,\n      storeEmailAddress: values.storeEmailAddress,\n      serveOnTables: values.serveOnTables\n    }).then(_ => {\n      localStorage.setItem(\"shopname\", shopSelector.shopname);\n      localStorage.setItem(\"storeadded\", true);\n      dispatch(toggleLoader(false));\n      setSetupComplete(true);\n    }).catch(error => {\n      dispatch(toggleLoader(false));\n      dispatch(displayToastMessage({\n        open: true,\n        type: \"error\",\n        message: error.message\n      }));\n    });\n  };\n\n  const jumpToStep = n => {\n    setStep(n);\n  };\n\n  const finishSetup = () => {\n    localStorage.setItem(\"shopname\", shopSelector.shopname);\n    window.location.reload();\n  };\n\n  return /*#__PURE__*/_jsxDEV(sc.SetupWrapper, {\n    children: [isSetupComplete && /*#__PURE__*/_jsxDEV(Confetti, {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      recycle: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 33\n    }, this), /*#__PURE__*/_jsxDEV(sc.ShopSteupWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(sc.ShopSteupTitle, {\n        children: [/*#__PURE__*/_jsxDEV(Store, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 36\n        }, this), \" \\xA0 \", SetupShopMessage, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Stepper, {\n        activeStep: activeStep,\n        alternativeLabel: true,\n        classes: {\n          root: \"shop-setup-stepper\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Step, {\n          children: /*#__PURE__*/_jsxDEV(StepLabel, {\n            children: OpenShopMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Step, {\n          children: /*#__PURE__*/_jsxDEV(StepLabel, {\n            children: OpenStoreMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(sc.ShopSteupContent, {\n        children: [activeStep === 0 && /*#__PURE__*/_jsxDEV(ShopSetup, {\n          shopDetails: shopDetails,\n          onSubmit: stepOneSubmit,\n          jumpToStep: jumpToStep\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 42\n        }, this), activeStep === 1 && /*#__PURE__*/_jsxDEV(StoreSetup, {\n          storeDetails: defaultStoreDetails,\n          onSubmit: stepTwoSubmit,\n          jumpToStep: jumpToStep,\n          finishSetup: finishSetup\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 42\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SetupApp, \"eSVRNr12tseS2nRmXIepyY9fr5o=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = SetupApp;\nexport default SetupApp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SetupApp\");","map":{"version":3,"sources":["/Users/Shruti_Bhateja/Documents/taxbouy-admin/taxbouy-admin/src/containers/Shop/index.jsx"],"names":["React","useEffect","useState","useDispatch","useSelector","Stepper","Step","StepLabel","Store","Confetti","ShopSetup","StoreSetup","sc","setShopname","toggleLoader","displayToastMessage","openMyShop","openMyStore","defaultShopDetails","defaultStoreDetails","OpenShopMessage","OpenStoreMessage","SetupShopMessage","SetupApp","dispatch","shopSelector","state","shop","activeStep","setStep","isSetupComplete","setSetupComplete","shopDetails","shopId","shopname","stores","length","localStorage","setItem","window","location","reload","stepOneSubmit","undefined","then","data","message","id","open","type","step","catch","error","stepTwoSubmit","values","storeLocationName","storePrimaryLocation","storeAddress","storeContactNumber","storeEmailAddress","serveOnTables","_","jumpToStep","n","finishSetup","innerWidth","innerHeight","root"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Stepper, Step, StepLabel } from \"@material-ui/core\";\nimport { Store } from \"@material-ui/icons\";\nimport Confetti from \"react-confetti\";\nimport ShopSetup from \"./ShopSetup\";\nimport StoreSetup from \"./StoreSetup\";\nimport * as sc from \"./styles\";\nimport { setShopname } from \"./shop.slice\";\nimport { toggleLoader, displayToastMessage } from \"../../store/common/application.slice\";\nimport { openMyShop, openMyStore } from \"../../apis\";\nimport { defaultShopDetails, defaultStoreDetails } from \"../../constants/defaults\";\nimport { OpenShopMessage, OpenStoreMessage, SetupShopMessage } from \"../../constants/messages\";\n\n\nconst SetupApp = () => {\n    const dispatch = useDispatch();\n    const shopSelector = useSelector(state => state.shop);\n    const [activeStep, setStep] = useState(0);\n    const [isSetupComplete, setSetupComplete] = useState(false);\n\n    const shopDetails = shopSelector?.shopId ? {\n        shopId: shopSelector.shopId,\n        shopname: shopSelector.shopname\n    } : { ...defaultShopDetails };\n\n    useEffect(() => {\n        if (shopSelector.stores.length > 0) {\n            localStorage.setItem(\"shopname\", shopSelector.shopname);\n            localStorage.setItem(\"storeadded\", true);\n            window.location.reload();\n        }\n    }, [shopSelector.stores.length, shopSelector.shopname]);\n\n    const stepOneSubmit = ({ shopname }) => {\n        /* submit shop details */\n        dispatch(toggleLoader(true));\n\n        openMyShop({\n            shopname,\n            shopId: shopSelector.shopId || undefined\n        }).then(({ data, message }) => {\n            dispatch(toggleLoader(false));\n            dispatch(setShopname({\n                shopId: data.id,\n                shopname: data.shopname,\n            }));\n            dispatch(displayToastMessage({\n                open: true,\n                type: \"success\",\n                message\n            }));\n            setStep(step => step + 1);\n        }).catch(error => {\n            dispatch(toggleLoader(false));\n            dispatch(displayToastMessage({\n                open: true,\n                type: \"error\",\n                message: error.message\n            }));\n        });\n    }\n\n    const stepTwoSubmit = (values) => {\n        /* submit store details */\n        dispatch(toggleLoader(true));\n\n        openMyStore({\n            shopId: shopSelector.shopId,\n            storeLocationName: values.storePrimaryLocation,\n            storeAddress: values.storeAddress,\n            storeContactNumber: values.storeContactNumber,\n            storeEmailAddress: values.storeEmailAddress,\n            serveOnTables: values.serveOnTables\n        }).then(_ => {\n            localStorage.setItem(\"shopname\", shopSelector.shopname);\n            localStorage.setItem(\"storeadded\", true);\n            dispatch(toggleLoader(false));\n            setSetupComplete(true);\n        }).catch(error => {\n            dispatch(toggleLoader(false));\n            dispatch(displayToastMessage({\n                open: true,\n                type: \"error\",\n                message: error.message\n            }));\n        })\n    }\n\n    const jumpToStep = (n) => {\n        setStep(n);\n    }\n\n    const finishSetup = () => {\n        localStorage.setItem(\"shopname\", shopSelector.shopname);\n        window.location.reload();\n    }\n\n    return (\n        <sc.SetupWrapper>\n            {isSetupComplete && <Confetti width={window.innerWidth} height={window.innerHeight} recycle={false} />}\n            <sc.ShopSteupWrapper>\n                <sc.ShopSteupTitle><Store /> &nbsp; {SetupShopMessage} </sc.ShopSteupTitle>\n                <Stepper activeStep={activeStep} alternativeLabel classes={{ root: \"shop-setup-stepper\" }}>\n                    <Step>\n                        <StepLabel>{OpenShopMessage}</StepLabel>\n                    </Step>\n                    <Step>\n                        <StepLabel>{OpenStoreMessage}</StepLabel>\n                    </Step>\n                </Stepper>\n\n                <sc.ShopSteupContent>\n                    {activeStep === 0 && <ShopSetup shopDetails={shopDetails} onSubmit={stepOneSubmit} jumpToStep={jumpToStep} />}\n\n                    {activeStep === 1 && <StoreSetup storeDetails={defaultStoreDetails} onSubmit={stepTwoSubmit} jumpToStep={jumpToStep} finishSetup={finishSetup} />}\n                </sc.ShopSteupContent>\n            </sc.ShopSteupWrapper>\n        </sc.SetupWrapper>\n    );\n}\n\nexport default SetupApp;"]},"metadata":{},"sourceType":"module"}