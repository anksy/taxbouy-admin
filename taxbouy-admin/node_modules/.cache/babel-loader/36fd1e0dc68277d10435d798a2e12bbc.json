{"ast":null,"code":"var _jsxFileName = \"/Users/Shruti_Bhateja/Documents/taxbouy-admin/taxbouy-admin/src/containers/Ecommerce/Product/upsert.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { useFormik } from 'formik';\nimport * as yup from 'yup';\nimport { Button, Grid } from \"@material-ui/core\";\nimport { AppWrapper, ActionTray, ContentWrapper } from \"../../../components/global/styles\";\nimport Textfield from \"../../../components/form/Textfield\";\nimport Select from \"../../../components/form/Select\";\nimport Upload from \"../../../components/form/Upload\";\nimport { Required } from \"../../../constants/messages\";\nimport { defaultProduct } from \"../../../constants/defaults\";\nimport { httpVerbs, promiseStatus } from \"../../../constants\";\nimport { useGetProductsQuery, useUpsertProductMutation } from \"../../../services/query/product\";\nimport { useGetCategoriesQuery } from \"../../../services/query/category\";\nimport { toggleLoader, displayToastMessage } from \"../../../store/common/application.slice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst validationSchema = yup.object({\n  title: yup.string().required(Required),\n  productCode: yup.string().required(Required),\n  category: yup.number().required(Required),\n  image: yup.string(),\n  description: yup.string(),\n  regularPrice: yup.number().required(Required),\n  discountedPrice: yup.number().required(Required),\n  isActive: yup.boolean().required(Required)\n});\n\nconst ProductUpsertContainer = _ref => {\n  _s();\n\n  var _metaAttrs$data, _metaAttrs$error, _metaAttrs$error$data;\n\n  let {\n    dispatch,\n    history,\n    match: {\n      params\n    }\n  } = _ref;\n  const [upsertProduct, metaAttrs] = useUpsertProductMutation();\n  const {\n    data: productData\n  } = useGetProductsQuery(undefined, {\n    selectFromResult: _ref2 => {\n      let {\n        data\n      } = _ref2;\n      return {\n        data: (data && (data === null || data === void 0 ? void 0 : data.data) || []).find(el => el.id === +params.resourceId)\n      };\n    }\n  });\n  const {\n    data\n  } = useGetCategoriesQuery();\n  const categories = (data === null || data === void 0 ? void 0 : data.data) || [];\n  const defaultProductData = productData ? { ...productData,\n    isActive: productData.is_active,\n    is_active: undefined,\n    is_deleted: undefined,\n    createdAt: undefined,\n    slug: undefined\n  } : defaultProduct;\n  useEffect(() => {\n    if (!metaAttrs.isLoading) {\n      if (metaAttrs.status === promiseStatus.REJECTED) {\n        dispatch(toggleLoader(false));\n        dispatch(displayToastMessage({\n          open: true,\n          type: \"error\",\n          message: metaAttrs.error.data.message\n        }));\n      }\n\n      if (metaAttrs.status === promiseStatus.FULFILLED) {\n        dispatch(toggleLoader(false));\n        dispatch(displayToastMessage({\n          open: true,\n          type: \"success\",\n          message: metaAttrs.data.message\n        }));\n        history.push(`/products`);\n      }\n    }\n  }, [metaAttrs.status, metaAttrs.isLoading, (_metaAttrs$data = metaAttrs.data) === null || _metaAttrs$data === void 0 ? void 0 : _metaAttrs$data.message, (_metaAttrs$error = metaAttrs.error) === null || _metaAttrs$error === void 0 ? void 0 : (_metaAttrs$error$data = _metaAttrs$error.data) === null || _metaAttrs$error$data === void 0 ? void 0 : _metaAttrs$error$data.message, dispatch, history]);\n\n  const onSubmit = async values => {\n    dispatch(toggleLoader(true));\n    await upsertProduct({\n      method: values.id ? httpVerbs.PUT : httpVerbs.POST,\n      body: values\n    });\n  };\n\n  const formik = useFormik({\n    initialValues: { ...defaultProductData\n    },\n    validationSchema,\n    enableReinitialize: true,\n    onSubmit: values => {\n      onSubmit(values);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(AppWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(ActionTray, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: productData !== null && productData !== void 0 && productData.id ? \"Edit Product\" : \"Add New Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        color: \"primary\",\n        variant: \"contained\",\n        onClick: history.goBack,\n        children: \"Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ContentWrapper, {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: formik.handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 4,\n            children: /*#__PURE__*/_jsxDEV(Textfield, {\n              name: \"title\",\n              label: \"Product Title\",\n              value: formik.values.title,\n              onChange: formik.handleChange,\n              error: formik.touched.title && !!formik.errors.title,\n              helperText: formik.touched.title && formik.errors.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 4,\n            children: /*#__PURE__*/_jsxDEV(Textfield, {\n              name: \"productCode\",\n              label: \"Product Code\",\n              value: formik.values.productCode,\n              onChange: formik.handleChange,\n              error: formik.touched.productCode && !!formik.errors.productCode,\n              helperText: formik.touched.productCode && formik.errors.productCode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 4,\n            children: /*#__PURE__*/_jsxDEV(Select, {\n              name: \"category\",\n              label: \"Category\",\n              value: formik.values.category,\n              onChange: formik.handleChange,\n              onBlur: formik.handleBlur,\n              options: [{\n                label: \"Self\",\n                value: 0\n              }].concat(categories.map(el => ({\n                label: el.title,\n                value: el.id\n              }))),\n              error: formik.touched.category && !!formik.errors.category,\n              helperText: formik.touched.category && formik.errors.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Upload, {\n              name: \"image\",\n              value: formik.values.image,\n              onChange: formik.setFieldValue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Textfield, {\n              name: \"description\",\n              label: \"Description\",\n              value: formik.values.description,\n              onChange: formik.handleChange,\n              error: formik.touched.description && !!formik.errors.description,\n              helperText: formik.touched.description && formik.errors.description,\n              multiline: true,\n              rows: 5\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            children: /*#__PURE__*/_jsxDEV(Textfield, {\n              name: \"regularPrice\",\n              label: \"Regular Price\",\n              value: formik.values.regularPrice,\n              onChange: formik.handleChange,\n              error: formik.touched.regularPrice && !!formik.errors.regularPrice,\n              helperText: formik.touched.regularPrice && formik.errors.regularPrice\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            children: /*#__PURE__*/_jsxDEV(Textfield, {\n              name: \"discountedPrice\",\n              label: \"Discounted Price\",\n              value: formik.values.discountedPrice,\n              onChange: formik.handleChange,\n              error: formik.touched.discountedPrice && !!formik.errors.discountedPrice,\n              helperText: formik.touched.discountedPrice && formik.errors.discountedPrice\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Select, {\n              name: \"isActive\",\n              label: \"is Active?\",\n              variant: \"outlined\",\n              value: formik.values.isActive,\n              onChange: formik.handleChange,\n              options: [{\n                label: \"Active\",\n                value: true\n              }, {\n                label: \"Disable\",\n                value: false\n              }],\n              error: formik.touched.isActive && !!formik.errors.isActive,\n              helperText: formik.touched.isActive && formik.errors.isActive\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              color: \"primary\",\n              variant: \"contained\",\n              type: \"submit\",\n              className: \"mr20\",\n              children: productData !== null && productData !== void 0 && productData.id ? \"Update\" : \"Create\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProductUpsertContainer, \"uVroRbRqVHFY9cYeNyB184IqD/g=\", false, function () {\n  return [useUpsertProductMutation, useGetProductsQuery, useGetCategoriesQuery, useFormik];\n});\n\n_c = ProductUpsertContainer;\nexport default ProductUpsertContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductUpsertContainer\");","map":{"version":3,"sources":["/Users/Shruti_Bhateja/Documents/taxbouy-admin/taxbouy-admin/src/containers/Ecommerce/Product/upsert.jsx"],"names":["React","useEffect","useFormik","yup","Button","Grid","AppWrapper","ActionTray","ContentWrapper","Textfield","Select","Upload","Required","defaultProduct","httpVerbs","promiseStatus","useGetProductsQuery","useUpsertProductMutation","useGetCategoriesQuery","toggleLoader","displayToastMessage","validationSchema","object","title","string","required","productCode","category","number","image","description","regularPrice","discountedPrice","isActive","boolean","ProductUpsertContainer","dispatch","history","match","params","upsertProduct","metaAttrs","data","productData","undefined","selectFromResult","find","el","id","resourceId","categories","defaultProductData","is_active","is_deleted","createdAt","slug","isLoading","status","REJECTED","open","type","message","error","FULFILLED","push","onSubmit","values","method","PUT","POST","body","formik","initialValues","enableReinitialize","goBack","handleSubmit","handleChange","touched","errors","handleBlur","label","value","concat","map","setFieldValue"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useFormik } from 'formik';\nimport * as yup from 'yup';\nimport { Button, Grid } from \"@material-ui/core\";\nimport { AppWrapper, ActionTray, ContentWrapper } from \"../../../components/global/styles\";\nimport Textfield from \"../../../components/form/Textfield\";\nimport Select from \"../../../components/form/Select\";\nimport Upload from \"../../../components/form/Upload\";\nimport { Required } from \"../../../constants/messages\";\nimport { defaultProduct } from \"../../../constants/defaults\";\nimport { httpVerbs, promiseStatus } from \"../../../constants\";\nimport { useGetProductsQuery, useUpsertProductMutation } from \"../../../services/query/product\";\nimport { useGetCategoriesQuery } from \"../../../services/query/category\";\nimport { toggleLoader, displayToastMessage } from \"../../../store/common/application.slice\";\n\nconst validationSchema = yup.object({\n    title: yup\n        .string()\n        .required(Required),\n    productCode: yup\n        .string()\n        .required(Required),\n    category: yup\n        .number()\n        .required(Required),\n    image: yup\n        .string(),\n    description: yup\n        .string(),\n    regularPrice: yup\n        .number()\n        .required(Required),\n    discountedPrice: yup\n        .number()\n        .required(Required),\n    isActive: yup\n        .boolean()\n        .required(Required),\n});\n\n\nconst ProductUpsertContainer = ({ dispatch, history, match: { params } }) => {\n    const [upsertProduct, metaAttrs] = useUpsertProductMutation();\n    const { data: productData } = useGetProductsQuery(undefined, {\n        selectFromResult: ({ data }) => {\n            return ({\n                data: ((data && data?.data) || []).find(el => el.id === +params.resourceId)\n            })\n        }\n    });\n\n    const { data } = useGetCategoriesQuery();\n    const categories = data?.data || [];\n\n    const defaultProductData = productData\n        ? {\n            ...productData,\n            isActive: productData.is_active,\n            is_active: undefined,\n            is_deleted: undefined,\n            createdAt: undefined,\n            slug: undefined\n        } : defaultProduct;\n\n\n    useEffect(() => {\n        if (!metaAttrs.isLoading) {\n            if (metaAttrs.status === promiseStatus.REJECTED) {\n                dispatch(toggleLoader(false));\n                dispatch(displayToastMessage({\n                    open: true,\n                    type: \"error\",\n                    message: metaAttrs.error.data.message\n                }));\n            }\n\n            if (metaAttrs.status === promiseStatus.FULFILLED) {\n                dispatch(toggleLoader(false));\n                dispatch(displayToastMessage({\n                    open: true,\n                    type: \"success\",\n                    message: metaAttrs.data.message\n                }));\n                history.push(`/products`);\n            }\n        }\n    }, [metaAttrs.status, metaAttrs.isLoading, metaAttrs.data?.message, metaAttrs.error?.data?.message, dispatch, history])\n\n    const onSubmit = async (values) => {\n        dispatch(toggleLoader(true));\n        await upsertProduct({ method: (values.id ? httpVerbs.PUT : httpVerbs.POST), body: values });\n    }\n\n    const formik = useFormik({\n        initialValues: {\n            ...defaultProductData\n        },\n        validationSchema,\n        enableReinitialize: true,\n        onSubmit: (values) => {\n            onSubmit(values);\n        }\n    });\n\n    return (\n        <AppWrapper>\n            <ActionTray>\n                <h2>{productData?.id ? \"Edit Product\" : \"Add New Product\"}</h2>\n                <Button color=\"primary\" variant=\"contained\" onClick={history.goBack}>Back</Button>\n            </ActionTray>\n\n            <ContentWrapper>\n                <form onSubmit={formik.handleSubmit}>\n                    <Grid container spacing={3}>\n                        <Grid item xs={4}>\n                            <Textfield\n                                name=\"title\"\n                                label=\"Product Title\"\n                                value={formik.values.title}\n                                onChange={formik.handleChange}\n                                error={formik.touched.title && !!formik.errors.title}\n                                helperText={formik.touched.title && formik.errors.title}\n                            />\n                        </Grid>\n                        <Grid item xs={4}>\n                            <Textfield\n                                name=\"productCode\"\n                                label=\"Product Code\"\n                                value={formik.values.productCode}\n                                onChange={formik.handleChange}\n                                error={formik.touched.productCode && !!formik.errors.productCode}\n                                helperText={formik.touched.productCode && formik.errors.productCode}\n                            />\n                        </Grid>\n                        <Grid item xs={4}>\n                            <Select\n                                name=\"category\"\n                                label=\"Category\"\n                                value={formik.values.category}\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                                options={[{ label: \"Self\", value: 0 }].concat(categories.map(el => ({ label: el.title, value: el.id })))}\n                                error={formik.touched.category && !!formik.errors.category}\n                                helperText={formik.touched.category && formik.errors.category}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <Upload name=\"image\" value={formik.values.image} onChange={formik.setFieldValue} />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <Textfield\n                                name=\"description\"\n                                label=\"Description\"\n                                value={formik.values.description}\n                                onChange={formik.handleChange}\n                                error={formik.touched.description && !!formik.errors.description}\n                                helperText={formik.touched.description && formik.errors.description}\n                                multiline\n                                rows={5}\n                            />\n                        </Grid>\n                        <Grid item xs={6}>\n                            <Textfield\n                                name=\"regularPrice\"\n                                label=\"Regular Price\"\n                                value={formik.values.regularPrice}\n                                onChange={formik.handleChange}\n                                error={formik.touched.regularPrice && !!formik.errors.regularPrice}\n                                helperText={formik.touched.regularPrice && formik.errors.regularPrice}\n                            />\n                        </Grid>\n                        <Grid item xs={6}>\n                            <Textfield\n                                name=\"discountedPrice\"\n                                label=\"Discounted Price\"\n                                value={formik.values.discountedPrice}\n                                onChange={formik.handleChange}\n                                error={formik.touched.discountedPrice && !!formik.errors.discountedPrice}\n                                helperText={formik.touched.discountedPrice && formik.errors.discountedPrice}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <Select\n                                name=\"isActive\"\n                                label=\"is Active?\"\n                                variant=\"outlined\"\n                                value={formik.values.isActive}\n                                onChange={formik.handleChange}\n                                options={[{ label: \"Active\", value: true }, { label: \"Disable\", value: false }]}\n                                error={formik.touched.isActive && !!formik.errors.isActive}\n                                helperText={formik.touched.isActive && formik.errors.isActive}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <Button color=\"primary\" variant=\"contained\" type=\"submit\" className=\"mr20\">\n                                {productData?.id ? \"Update\" : \"Create\"}\n                            </Button>\n                            {/* <Button color=\"primary\" variant=\"contained\" type=\"submit\" className=\"mr20 btn-trans\">\n                                Cancel\n                            </Button> */}\n                        </Grid>\n                    </Grid>\n                </form>\n            </ContentWrapper>\n        </AppWrapper>\n    );\n}\n\nexport default ProductUpsertContainer;"]},"metadata":{},"sourceType":"module"}