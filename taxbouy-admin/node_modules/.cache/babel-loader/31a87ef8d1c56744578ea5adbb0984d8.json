{"ast":null,"code":"var _jsxFileName = \"/Users/Shruti_Bhateja/Documents/taxbouy-admin/taxbouy-admin/src/containers/Ecommerce/Product/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport Table from \"../../../components/table\";\nimport { AppWrapper, ActionTray } from \"../../../components/global/styles\";\nimport { useGetProductsQuery, useUpsertProductMutation, useDeleteProductMutation } from \"../../../services/query/product\";\nimport { displayModal, toggleLoader, displayToastMessage } from \"../../../store/common/application.slice\";\nimport { httpVerbs, promiseStatus } from \"../../../constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst columns = [{\n  field: \"title\",\n  header: \"Title\",\n  width: \"15%\"\n}, {\n  field: \"regularPrice\",\n  header: \"Regular Price\",\n  width: \"15%\",\n  prefix: \"₹\"\n}, {\n  field: \"discountedPrice\",\n  header: \"Discounted Price\",\n  width: \"15%\",\n  prefix: \"₹\"\n}, {\n  field: \"createdAt\",\n  header: \"Created At\",\n  width: \"20%\",\n  type: \"date\"\n}, {\n  field: \"is_active\",\n  header: \"Is Active\",\n  values: [\"Yes\", \"No\"],\n  width: \"15%\"\n}];\n\nconst ProductContainer = _ref => {\n  _s();\n\n  var _metaAttrs$error, _metaAttrs$error$data, _deleteMetaAttrs$data, _deleteMetaAttrs$erro, _deleteMetaAttrs$erro2;\n\n  let {\n    dispatch,\n    history\n  } = _ref;\n  const {\n    data: products,\n    isLoading\n  } = useGetProductsQuery();\n  const [upsertProduct, metaAttrs] = useUpsertProductMutation();\n  const [deleteProduct, deleteMetaAttrs] = useDeleteProductMutation();\n  useEffect(() => {\n    if (!metaAttrs.isLoading) {\n      if (metaAttrs.status === promiseStatus.REJECTED) {\n        dispatch(displayToastMessage({\n          open: true,\n          type: \"error\",\n          message: metaAttrs.error.data.message\n        }));\n      }\n    }\n  }, [metaAttrs.status, metaAttrs.isLoading, (_metaAttrs$error = metaAttrs.error) === null || _metaAttrs$error === void 0 ? void 0 : (_metaAttrs$error$data = _metaAttrs$error.data) === null || _metaAttrs$error$data === void 0 ? void 0 : _metaAttrs$error$data.message, dispatch]);\n  useEffect(() => {\n    if (!deleteMetaAttrs.isLoading) {\n      if (deleteMetaAttrs.status === promiseStatus.REJECTED) {\n        dispatch(toggleLoader(false));\n        dispatch(displayToastMessage({\n          open: true,\n          type: \"error\",\n          message: deleteMetaAttrs.error.data.message\n        }));\n      }\n\n      if (deleteMetaAttrs.status === promiseStatus.FULFILLED) {\n        dispatch(toggleLoader(false));\n        dispatch(displayToastMessage({\n          open: true,\n          type: \"success\",\n          message: deleteMetaAttrs.data.message\n        }));\n        dispatch(displayModal({\n          open: false,\n          modalProps: {}\n        }));\n      }\n    }\n  }, [deleteMetaAttrs.status, deleteMetaAttrs.isLoading, (_deleteMetaAttrs$data = deleteMetaAttrs.data) === null || _deleteMetaAttrs$data === void 0 ? void 0 : _deleteMetaAttrs$data.message, (_deleteMetaAttrs$erro = deleteMetaAttrs.error) === null || _deleteMetaAttrs$erro === void 0 ? void 0 : (_deleteMetaAttrs$erro2 = _deleteMetaAttrs$erro.data) === null || _deleteMetaAttrs$erro2 === void 0 ? void 0 : _deleteMetaAttrs$erro2.message, dispatch]);\n\n  const onDelete = resourceId => {\n    dispatch(displayModal({\n      open: true,\n      modalProps: {\n        title: \"Confirm your action\",\n        component: () => /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Do you really want to delete this product?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 34\n        }, this),\n        okText: \"Delete\",\n        cancelText: \"Cancel\",\n        ok: () => {\n          dispatch(toggleLoader(true));\n          deleteProduct(resourceId);\n        }\n      }\n    }));\n  };\n\n  const onStatusToggle = async data => {\n    await upsertProduct({\n      method: httpVerbs.PATCH,\n      body: {\n        \"id\": data.id,\n        \"key\": \"is_active\",\n        \"value\": !data.is_active\n      }\n    });\n  };\n\n  const onEdit = data => {\n    history.push(`/products/add/${data.id}`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(AppWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(ActionTray, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"toolbar\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          variant: \"contained\",\n          onClick: () => history.push(`/products/add/new`),\n          children: \"New Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      columns: columns,\n      rows: products === null || products === void 0 ? void 0 : products.data,\n      editAction: onEdit,\n      deactivateAction: onStatusToggle,\n      deleteAction: onDelete,\n      isFetching: isLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProductContainer, \"dRm7sXIfv0TmS4eOMUEQEpKaj/o=\", false, function () {\n  return [useGetProductsQuery, useUpsertProductMutation, useDeleteProductMutation];\n});\n\n_c = ProductContainer;\nexport default ProductContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductContainer\");","map":{"version":3,"sources":["/Users/Shruti_Bhateja/Documents/taxbouy-admin/taxbouy-admin/src/containers/Ecommerce/Product/index.jsx"],"names":["React","useEffect","Button","Table","AppWrapper","ActionTray","useGetProductsQuery","useUpsertProductMutation","useDeleteProductMutation","displayModal","toggleLoader","displayToastMessage","httpVerbs","promiseStatus","columns","field","header","width","prefix","type","values","ProductContainer","dispatch","history","data","products","isLoading","upsertProduct","metaAttrs","deleteProduct","deleteMetaAttrs","status","REJECTED","open","message","error","FULFILLED","modalProps","onDelete","resourceId","title","component","okText","cancelText","ok","onStatusToggle","method","PATCH","body","id","is_active","onEdit","push"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,OAAOC,KAAP,MAAkB,2BAAlB;AACA,SAASC,UAAT,EAAqBC,UAArB,QAAuC,mCAAvC;AACA,SAASC,mBAAT,EAA8BC,wBAA9B,EAAwDC,wBAAxD,QAAwF,iCAAxF;AACA,SAASC,YAAT,EAAuBC,YAAvB,EAAqCC,mBAArC,QAAgE,yCAAhE;AACA,SAASC,SAAT,EAAoBC,aAApB,QAAyC,oBAAzC;;AAEA,MAAMC,OAAO,GAAG,CACZ;AAAEC,EAAAA,KAAK,EAAE,OAAT;AAAkBC,EAAAA,MAAM,EAAE,OAA1B;AAAmCC,EAAAA,KAAK,EAAE;AAA1C,CADY,EAEZ;AAAEF,EAAAA,KAAK,EAAE,cAAT;AAAyBC,EAAAA,MAAM,EAAE,eAAjC;AAAkDC,EAAAA,KAAK,EAAE,KAAzD;AAAgEC,EAAAA,MAAM,EAAE;AAAxE,CAFY,EAGZ;AAAEH,EAAAA,KAAK,EAAE,iBAAT;AAA4BC,EAAAA,MAAM,EAAE,kBAApC;AAAwDC,EAAAA,KAAK,EAAE,KAA/D;AAAsEC,EAAAA,MAAM,EAAE;AAA9E,CAHY,EAIZ;AAAEH,EAAAA,KAAK,EAAE,WAAT;AAAsBC,EAAAA,MAAM,EAAE,YAA9B;AAA4CC,EAAAA,KAAK,EAAE,KAAnD;AAA0DE,EAAAA,IAAI,EAAE;AAAhE,CAJY,EAKZ;AAAEJ,EAAAA,KAAK,EAAE,WAAT;AAAsBC,EAAAA,MAAM,EAAE,WAA9B;AAA2CI,EAAAA,MAAM,EAAE,CAAC,KAAD,EAAQ,IAAR,CAAnD;AAAkEH,EAAAA,KAAK,EAAE;AAAzE,CALY,CAAhB;;AAQA,MAAMI,gBAAgB,GAAG,QAA2B;AAAA;;AAAA;;AAAA,MAA1B;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,GAA0B;AAChD,QAAM;AAAEC,IAAAA,IAAI,EAAEC,QAAR;AAAkBC,IAAAA;AAAlB,MAAgCpB,mBAAmB,EAAzD;AACA,QAAM,CAACqB,aAAD,EAAgBC,SAAhB,IAA6BrB,wBAAwB,EAA3D;AACA,QAAM,CAACsB,aAAD,EAAgBC,eAAhB,IAAmCtB,wBAAwB,EAAjE;AAEAP,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI,CAAC2B,SAAS,CAACF,SAAf,EAA0B;AACtB,UAAIE,SAAS,CAACG,MAAV,KAAqBlB,aAAa,CAACmB,QAAvC,EAAiD;AAC7CV,QAAAA,QAAQ,CAACX,mBAAmB,CAAC;AACzBsB,UAAAA,IAAI,EAAE,IADmB;AAEzBd,UAAAA,IAAI,EAAE,OAFmB;AAGzBe,UAAAA,OAAO,EAAEN,SAAS,CAACO,KAAV,CAAgBX,IAAhB,CAAqBU;AAHL,SAAD,CAApB,CAAR;AAKH;AACJ;AACJ,GAVQ,EAUN,CAACN,SAAS,CAACG,MAAX,EAAmBH,SAAS,CAACF,SAA7B,sBAAwCE,SAAS,CAACO,KAAlD,8EAAwC,iBAAiBX,IAAzD,0DAAwC,sBAAuBU,OAA/D,EAAwEZ,QAAxE,CAVM,CAAT;AAYArB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI,CAAC6B,eAAe,CAACJ,SAArB,EAAgC;AAC5B,UAAII,eAAe,CAACC,MAAhB,KAA2BlB,aAAa,CAACmB,QAA7C,EAAuD;AACnDV,QAAAA,QAAQ,CAACZ,YAAY,CAAC,KAAD,CAAb,CAAR;AACAY,QAAAA,QAAQ,CAACX,mBAAmB,CAAC;AACzBsB,UAAAA,IAAI,EAAE,IADmB;AAEzBd,UAAAA,IAAI,EAAE,OAFmB;AAGzBe,UAAAA,OAAO,EAAEJ,eAAe,CAACK,KAAhB,CAAsBX,IAAtB,CAA2BU;AAHX,SAAD,CAApB,CAAR;AAKH;;AAED,UAAIJ,eAAe,CAACC,MAAhB,KAA2BlB,aAAa,CAACuB,SAA7C,EAAwD;AACpDd,QAAAA,QAAQ,CAACZ,YAAY,CAAC,KAAD,CAAb,CAAR;AACAY,QAAAA,QAAQ,CAACX,mBAAmB,CAAC;AACzBsB,UAAAA,IAAI,EAAE,IADmB;AAEzBd,UAAAA,IAAI,EAAE,SAFmB;AAGzBe,UAAAA,OAAO,EAAEJ,eAAe,CAACN,IAAhB,CAAqBU;AAHL,SAAD,CAApB,CAAR;AAKAZ,QAAAA,QAAQ,CAACb,YAAY,CAAC;AAClBwB,UAAAA,IAAI,EAAE,KADY;AAElBI,UAAAA,UAAU,EAAE;AAFM,SAAD,CAAb,CAAR;AAIH;AACJ;AACJ,GAxBQ,EAwBN,CAACP,eAAe,CAACC,MAAjB,EAAyBD,eAAe,CAACJ,SAAzC,2BAAoDI,eAAe,CAACN,IAApE,0DAAoD,sBAAsBU,OAA1E,2BAAmFJ,eAAe,CAACK,KAAnG,oFAAmF,sBAAuBX,IAA1G,2DAAmF,uBAA6BU,OAAhH,EAAyHZ,QAAzH,CAxBM,CAAT;;AA2BA,QAAMgB,QAAQ,GAAIC,UAAD,IAAgB;AAC7BjB,IAAAA,QAAQ,CAACb,YAAY,CAAC;AAClBwB,MAAAA,IAAI,EAAE,IADY;AAElBI,MAAAA,UAAU,EAAE;AACRG,QAAAA,KAAK,EAAE,qBADC;AAERC,QAAAA,SAAS,EAAE,mBAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFT;AAGRC,QAAAA,MAAM,EAAE,QAHA;AAIRC,QAAAA,UAAU,EAAE,QAJJ;AAKRC,QAAAA,EAAE,EAAE,MAAM;AACNtB,UAAAA,QAAQ,CAACZ,YAAY,CAAC,IAAD,CAAb,CAAR;AACAmB,UAAAA,aAAa,CAACU,UAAD,CAAb;AACH;AARO;AAFM,KAAD,CAAb,CAAR;AAaH,GAdD;;AAgBA,QAAMM,cAAc,GAAG,MAAOrB,IAAP,IAAgB;AACnC,UAAMG,aAAa,CAAC;AAChBmB,MAAAA,MAAM,EAAElC,SAAS,CAACmC,KADF;AAEhBC,MAAAA,IAAI,EAAE;AACF,cAAMxB,IAAI,CAACyB,EADT;AAEF,eAAO,WAFL;AAGF,iBAAS,CAACzB,IAAI,CAAC0B;AAHb;AAFU,KAAD,CAAnB;AAQH,GATD;;AAWA,QAAMC,MAAM,GAAI3B,IAAD,IAAU;AACrBD,IAAAA,OAAO,CAAC6B,IAAR,CAAc,iBAAgB5B,IAAI,CAACyB,EAAG,EAAtC;AACH,GAFD;;AAIA,sBACI,QAAC,UAAD;AAAA,4BACI,QAAC,UAAD;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA,+BACI,QAAC,MAAD;AAAQ,UAAA,KAAK,EAAC,SAAd;AAAwB,UAAA,OAAO,EAAC,WAAhC;AAA4C,UAAA,OAAO,EAAE,MAAM1B,OAAO,CAAC6B,IAAR,CAAc,mBAAd,CAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ,eAMI,QAAC,KAAD;AAAO,MAAA,OAAO,EAAEtC,OAAhB;AAAyB,MAAA,IAAI,EAAEW,QAAF,aAAEA,QAAF,uBAAEA,QAAQ,CAAED,IAAzC;AAA+C,MAAA,UAAU,EAAE2B,MAA3D;AAAmE,MAAA,gBAAgB,EAAEN,cAArF;AAAqG,MAAA,YAAY,EAAEP,QAAnH;AAA6H,MAAA,UAAU,EAAEZ;AAAzI;AAAA;AAAA;AAAA;AAAA,YANJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAUH,CArFD;;GAAML,gB;UACoCf,mB,EACHC,wB,EACMC,wB;;;KAHvCa,gB;AAuFN,eAAeA,gBAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport Table from \"../../../components/table\";\nimport { AppWrapper, ActionTray } from \"../../../components/global/styles\";\nimport { useGetProductsQuery, useUpsertProductMutation, useDeleteProductMutation } from \"../../../services/query/product\";\nimport { displayModal, toggleLoader, displayToastMessage } from \"../../../store/common/application.slice\";\nimport { httpVerbs, promiseStatus } from \"../../../constants\";\n\nconst columns = [\n    { field: \"title\", header: \"Title\", width: \"15%\" },\n    { field: \"regularPrice\", header: \"Regular Price\", width: \"15%\", prefix: \"₹\" },\n    { field: \"discountedPrice\", header: \"Discounted Price\", width: \"15%\", prefix: \"₹\" },\n    { field: \"createdAt\", header: \"Created At\", width: \"20%\", type: \"date\" },\n    { field: \"is_active\", header: \"Is Active\", values: [\"Yes\", \"No\"], width: \"15%\" },\n];\n\nconst ProductContainer = ({ dispatch, history }) => {\n    const { data: products, isLoading } = useGetProductsQuery();\n    const [upsertProduct, metaAttrs] = useUpsertProductMutation();\n    const [deleteProduct, deleteMetaAttrs] = useDeleteProductMutation();\n\n    useEffect(() => {\n        if (!metaAttrs.isLoading) {\n            if (metaAttrs.status === promiseStatus.REJECTED) {\n                dispatch(displayToastMessage({\n                    open: true,\n                    type: \"error\",\n                    message: metaAttrs.error.data.message\n                }));\n            }\n        }\n    }, [metaAttrs.status, metaAttrs.isLoading, metaAttrs.error?.data?.message, dispatch])\n\n    useEffect(() => {\n        if (!deleteMetaAttrs.isLoading) {\n            if (deleteMetaAttrs.status === promiseStatus.REJECTED) {\n                dispatch(toggleLoader(false));\n                dispatch(displayToastMessage({\n                    open: true,\n                    type: \"error\",\n                    message: deleteMetaAttrs.error.data.message\n                }));\n            }\n\n            if (deleteMetaAttrs.status === promiseStatus.FULFILLED) {\n                dispatch(toggleLoader(false));\n                dispatch(displayToastMessage({\n                    open: true,\n                    type: \"success\",\n                    message: deleteMetaAttrs.data.message\n                }));\n                dispatch(displayModal({\n                    open: false,\n                    modalProps: {}\n                }));\n            }\n        }\n    }, [deleteMetaAttrs.status, deleteMetaAttrs.isLoading, deleteMetaAttrs.data?.message, deleteMetaAttrs.error?.data?.message, dispatch])\n\n\n    const onDelete = (resourceId) => {\n        dispatch(displayModal({\n            open: true,\n            modalProps: {\n                title: \"Confirm your action\",\n                component: () => <h1>Do you really want to delete this product?</h1>,\n                okText: \"Delete\",\n                cancelText: \"Cancel\",\n                ok: () => {\n                    dispatch(toggleLoader(true));\n                    deleteProduct(resourceId);\n                }\n            }\n        }));\n    }\n\n    const onStatusToggle = async (data) => {\n        await upsertProduct({\n            method: httpVerbs.PATCH,\n            body: {\n                \"id\": data.id,\n                \"key\": \"is_active\",\n                \"value\": !data.is_active,\n            }\n        });\n    }\n\n    const onEdit = (data) => {\n        history.push(`/products/add/${data.id}`);\n    }\n\n    return (\n        <AppWrapper>\n            <ActionTray>\n                <div className=\"toolbar\">\n                    <Button color=\"primary\" variant=\"contained\" onClick={() => history.push(`/products/add/new`)}>New Product</Button>\n                </div>\n            </ActionTray>\n            <Table columns={columns} rows={products?.data} editAction={onEdit} deactivateAction={onStatusToggle} deleteAction={onDelete} isFetching={isLoading} />\n        </AppWrapper>\n    );\n}\n\nexport default ProductContainer;"]},"metadata":{},"sourceType":"module"}